name: Release Tag


on:
  push:
    tags:
      - 'v[0-9]+.[0-9]+.[0-9]+'
      - 'v[0-9]+.[0-9]+.[0-9]+-pr[0-9]+-rc.[0-9]+'


jobs:
  tag:
    name: Release git tag
    runs-on: ubuntu-latest
    steps:
      - name: Read Pushed Tag
        id: tag
        uses: GRESB/action-git-tag@main
        with:
          read: true
          ref: ${{ github.ref }}
      - name: Release
        uses: ./
        with:
          name: ${{ steps.tag.outputs.tag }}
          is-final: ${{ steps.tag.outputs.is-final }}
          pr-number: ${{ steps.tag.outputs.pr-number }}
          github-token: ${{ secrets.GITHUB_TOKEN }}
          body: |
            Release action executed!
